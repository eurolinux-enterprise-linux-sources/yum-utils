commit 0ef9313cb81ad24f0d54a8c5a41ff64f298239c6
Author: James Antill <james@and.org>
Date:   Fri Feb 1 14:39:49 2013 -0500

    Take a blunt hammer to --pkgnarrow=installed, not pretty but...

diff --git a/repoquery.py b/repoquery.py
index 45c6826..0d3e33c 100755
--- a/repoquery.py
+++ b/repoquery.py
@@ -1370,7 +1370,6 @@ def main(args):
         needgroup = 1
     if opts.installed:
         opts.pkgnarrow = 'installed'
-        opts.disablerepos = ['*']
 
     if opts.nevra:
         pkgops.append("nevra")
@@ -1470,6 +1469,13 @@ def main(args):
     if opts.show_dupes:
         repoq.conf.showdupesfromrepos = True
             
+
+    if opts.pkgnarrow == 'installed':
+        # Just use a blunt hammer here, to make everyone sane:
+        opts.repoid = []
+        opts.disablerepos = ['*']
+        opts.enablerepos  = []
+
     if opts.repoid:
         found_repos = set()
         for repo in repoq.repos.findRepos('*'):
